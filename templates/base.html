{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}News Magazine{% endblock %}</title>

    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">


    <!-- In base.html -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


    <!-- Your custom CSS -->
    <link href="{% static 'css/styles.css' %}" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">


    <style>
      .back-to-top {
        position: fixed;
        bottom: 30px;
        right: 30px;
        opacity: 0;
        visibility: hidden;
        transform: scale(0.8);
        z-index: 1050;
        transition: 
          opacity 0.4s ease,
          visibility 0.4s ease,
          transform 0.3s ease,
          background-color 0.3s,
          color 0.3s;
      }

      .back-to-top.show {
        opacity: 1;
        visibility: visible;
        transform: scale(1);
      }

      /* ðŸ”¥ Gentle bounce effect on hover */
      .back-to-top:hover {
        transform: scale(1.15);
        transition: transform 0.2s ease-in-out;
      }

      .back-to-top.light {
        background-color: #0d6efd;
        color: #fff;
      }

      .back-to-top.dark {
        background-color: #f8f9fa;
        color: #000;
        border: 1px solid #ccc;
      }
    </style>
</head>
<body>
    <!-- Navbar -->
    {% include 'includes/navbar.html' %}

    <div class="container mt-4">
        {% block content %}{% endblock %}
    </div>

    <!-- Footer -->
    {% include "footer.html" %}

    <!-- Back to Top Button -->
    <button type="button" class="btn btn-lg rounded-circle back-to-top" id="backToTop">
      <i class="bi bi-arrow-up"></i>
    </button>

    <!-- Bootstrap JS via CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Your custom JS -->
    <script src="{% static 'js/scripts.js' %}"></script>

    <script>
      const btn = document.getElementById("backToTop");

      window.addEventListener("scroll", function() {
        if (document.documentElement.scrollTop > 200) {
          btn.classList.add("show");
        } else {
          btn.classList.remove("show");
        }

        // Detect section background
        const elementUnderButton = document.elementFromPoint(
          window.innerWidth - 40,
          window.innerHeight - 40
        );
        if (elementUnderButton) {
          const bgColor = window.getComputedStyle(elementUnderButton).backgroundColor;

          function luminance(r, g, b) {
            const a = [r, g, b].map(function (v) {
              v /= 255;
              return v <= 0.03928
                ? v / 12.92
                : Math.pow((v + 0.055) / 1.055, 2.4);
            });
            return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;
          }

          const rgb = bgColor.match(/\d+/g).map(Number);
          const lum = luminance(rgb[0], rgb[1], rgb[2]);

          if (lum < 0.5) {
            btn.classList.remove("dark");
            btn.classList.add("light");
          } else {
            btn.classList.remove("light");
            btn.classList.add("dark");
          }
        }
      });

      // Smooth scroll
      btn.addEventListener("click", function() {
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    </script>
</body>
</html>
